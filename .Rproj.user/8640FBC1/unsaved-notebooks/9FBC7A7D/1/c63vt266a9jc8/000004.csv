"0","tournaments <- c()"
"0","  "
"0","  for (webpage in urls) {"
"0","    "
"0","    skip_to_next <- FALSE"
"0","    "
"0","    tryCatch({"
"0",""
"0","    # Create temp directory for overall stats"
"0","    dir.create(""2_data/temp_player"")"
"0","    dir.create(""2_data/temp_team"")"
"0",""
"0","    # Create tournament directory"
"0","    "
"0","   tournament <- webpage %>% "
"0","      str_extract(""(?<=live/)[a-z0-9-]+"") %>% "
"0","      str_replace_all(""-"", ""_"")"
"0","   "
"0","   tournaments <- c(tournaments, tournament)"
"0","    "
"0","   tournament_dir_path <- paste(""2_data/"", tournament, sep = """")"
"0","    dir.create(tournament_dir_path)"
"0",""
"0","    # Create tournament temp folder team and player for overall tournament stats"
"0","    tournament_temp_player_dir_path <- paste(""2_data/"", tournament, ""/temp_player"", sep = """")"
"0","    dir.create(tournament_temp_player_dir_path)"
"0",""
"0",""
"0","    tournament_temp_team_dir_path <- paste(""2_data/"", tournament, ""/temp_team"", sep = """")"
"0","    dir.create(tournament_temp_team_dir_path)"
"0",""
"0","    # get match and date from url"
"0","    match <- str_extract(webpage, ""[a-z-]+[0-9]{8}"") %>%"
"0","      str_replace_all(""-"", ""_"") %>%"
"0","      str_extract(""[a-z_]+(?=_at)"")"
"0","    "
"0","    date <- str_extract(webpage, ""[0-9]{8}"")"
"0","    "
"0","    match_date <- date %>% "
"0","      dmy() %>% "
"0","      str_replace_all(""-"", """")"
"0","    "
"0","    date_match <- paste( match_date, match, sep = ""_"")"
"0",""
"0",""
"0","    # create match directories"
"0","    match_dir_path <- paste(""2_data/"", tournament, ""/"", date_match, sep = """")"
"0","   "
"0","    dir.create(match_dir_path)"
"0"," "
"0","    # get home and team"
"0","    headings <- get_tbl_headings(webpage)"
"0",""
"0","    home_table <- get_home_team_tbl(webpage, headings) %>%"
"0","      mutate(date = as.numeric(date), .before = position) %>%"
"0","      mutate("
"0","        date = dmy(date),"
"0","        match = match, .after = date"
"0","      )"
"0",""
"0","    away_table <- get_away_team_tbl(webpage, headings) %>%"
"0","      mutate(date = as.numeric(date), .before = position) %>%"
"0","      mutate("
"0","        date = dmy(date),"
"0","        match = match, .after = date"
"0","      )"
"0",""
"0","    player_csv_path <- paste(""2_data/"", tournament, ""/"", date_match,""/"", date_match, ""_player_stats.csv"", sep = """")"
"0","    team_csv_path <- paste(""2_data/"", tournament, ""/"", date_match, ""/"", date_match, ""_team_stats.csv"", sep = """")"
"0",""
"0","    full_table <- home_table %>%"
"0","      bind_rows(away_table)"
"0",""
"0","    summarised_team_stats <- full_table %>%"
"0","      select(-date:-position, -player) %>%"
"0","      group_by(country) %>%"
"0","      summarise_all(sum)"
"0",""
"0","    remaining_team_stats <- get_team_stats(webpage)"
"0",""
"0","    full_team_stats <- summarised_team_stats %>%"
"0","      full_join(remaining_team_stats) %>%"
"0","      mutate(date = as.numeric(date), .before = country) %>%"
"0","      mutate("
"0","        date = dmy(date),"
"0","        match = match, .after = date"
"0","      ) %>%"
"0","      write_csv(team_csv_path)"
"0",""
"0",""
"0",""
"0","    full_table %>%"
"0","      write_csv(player_csv_path)"
"0",""
"0",""
"0",""
"0",""
"0","    home_team <- get_team(home_table)"
"0","    home_file_path <- paste(""2_data/"", tournament, ""/temp_player/"",match_date, ""_"", home_team, "".csv"", sep = """")"
"0","    temp_home_file_path <- paste(""2_data/temp_player/"", match_date, ""_"", home_team,  "".csv"", sep = """")"
"0",""
"0","    home_table %>%"
"0","      write_csv(home_file_path) %>%"
"0","      write_csv(temp_home_file_path)"
"0",""
"0","    away_team <- get_team(away_table)"
"0",""
"0","    away_file_path <- paste(""2_data/"", tournament, ""/temp_player/"", match_date, ""_"", away_team, "".csv"", sep = """")"
"0","    temp_away_file_path <- paste(""2_data/temp_player/"", match_date, ""_"", away_team, "".csv"", sep = """")"
"0",""
"0","    away_table %>%"
"0","      write_csv(away_file_path) %>%"
"0","      write_csv(temp_away_file_path)"
"0",""
"0","    team_file_path <- paste(""2_data/"", tournament, ""/temp_team/"", date_match, "".csv"", sep = """")"
"0","    temp_team_file_path <- paste(""2_data/temp_team/"", date_match, "".csv"", sep = """")"
"0",""
"0","    full_team_stats %>%"
"0","      write_csv(team_file_path) %>%"
"0","      write_csv(temp_team_file_path)"
"0","    }, error = function(e){ skip_to_next <<- TRUE })"
"0","    "
"0","    if(skip_to_next) { next }"
"0","    "
"0","  }"
"2","'2_data/temp_player' already exists"
"2","'2_data/temp_team' already exists"
"2","'2_data/autumn_nations_cup' already exists"
"2","'2_data/autumn_nations_cup/20201113_ireland_vs_wales' already exists"
"2","'2_data/temp_player' already exists"
"2","'2_data/temp_team' already exists"
"2","'2_data/internationals' already exists"
"2","'2_data/internationals/temp_player' already exists"
"2","'2_data/internationals/temp_team' already exists"
"2","'2_data/internationals/20181103_england_vs_south_africa' already exists"
"2","'2_data/temp_player' already exists"
"2","'2_data/temp_team' already exists"
"2","'2_data/autumn_nations_cup' already exists"
"2","'2_data/autumn_nations_cup/temp_player' already exists"
"2","'2_data/autumn_nations_cup/temp_team' already exists"
"2","'2_data/autumn_nations_cup/20201121_england_vs_ireland' already exists"
"2","'2_data/temp_player' already exists"
"2","'2_data/temp_team' already exists"
"2","'2_data/premiership' already exists"
"2","'2_data/premiership/temp_player' already exists"
"2","'2_data/premiership/temp_team' already exists"
"2","'2_data/premiership/20201227_sale_sharks_vs_wasps' already exists"
"2","'2_data/temp_player' already exists"
"2","'2_data/temp_team' already exists"
"2","'2_data/autumn_nations_cup' already exists"
"2","'2_data/autumn_nations_cup/temp_player' already exists"
"2","'2_data/autumn_nations_cup/temp_team' already exists"
"2","'2_data/autumn_nations_cup/20201206_england_vs_france' already exists"
